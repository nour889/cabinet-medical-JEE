<%@ page contentType="text/html; charset=UTF-8" language="java" %><%@ page import="org.projet.cabinet.model.*" %><!DOCTYPE html><html><head><meta charset="UTF-8"><title>Gestion des rôles</title><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"><link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet"></head><body><div class="container mt-4"><h3>Gestion des rôles utilisateur</h3><% Utilisateur u = (Utilisateur) request.getAttribute("utilisateur"); boolean edition = (u != null); String erreur = (String) request.getAttribute("erreur"); if (erreur != null) { %><div class="alert alert-danger"><%= erreur %></div><% } %><form method="post" action="${pageContext.request.contextPath}/admin"><input type="hidden" name="action" value="<%= edition ? "modifierUtilisateur" : "creerUtilisateur" %>"><% if (edition) { %><input type="hidden" name="id" value="<%= u.getId() %>"><% } %><div class="row"><div class="col-md-6 mb-3"><label class="form-label">Nom</label><input type="text" name="nom" class="form-control" value="<%= edition ? u.getNom() : "" %>" required></div><div class="col-md-6 mb-3"><label class="form-label">Prénom</label><input type="text" name="prenom" class="form-control" value="<%= edition ? u.getPrenom() : "" %>" required></div></div><div class="mb-3"><label class="form-label">Email</label><input type="email" name="email" class="form-control" value="<%= edition ? u.getEmail() : "" %>" required></div><div class="mb-3"><label class="form-label">Mot de passe</label><input type="password" name="motDePasse" class="form-control" value="<%= edition ? u.getMotDePasse() : "" %>" required></div><div class="mb-3"><label class="form-label">Rôle</label><select name="role" class="form-select"> <% for (RoleUtilisateur r : RoleUtilisateur.values()) { if (r == RoleUtilisateur.PATIENT) continue; %><option value="<%= r.name() %>" <%= edition && u.getRole() == r ? "selected" : "" %>><%= r.name() %></option><% } %></select></div><button type="submit" class="btn btn-primary"><%= edition ? "Mettre à jour" : "Créer" %></button></form></div></body></html>
